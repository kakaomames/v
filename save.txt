void loop() {
  // 各センサーの値を読み取る
  int sensorLValue = analogRead(SensorL);  // 左センサー
  int sensorCValue = analogRead(SensorC);  // 中央センサー
  int sensorRValue = analogRead(SensorR);  // 右センサー

  // センサーがすべて黒を検知しているか確認
  if (sensorLValue < ThresholdL && sensorCValue < ThresholdC && sensorRValue < ThresholdR) {
    count++;  // カウントを1追加
    delay(500);  // 安定させるため少し遅延

    // カウントが3に達したら停止
    if (count >= 3) {
      // モーターを完全停止
      analogWrite(MotorLF, 0);
      analogWrite(MotorLB, 0);
      analogWrite(MotorRF, 0);
      analogWrite(MotorRB, 0);

      // LEDを点灯して終了を示す
      digitalWrite(LED, HIGH);
      while (true) {
        // ここで無限ループにすることで停止を維持
      }
    }
  } 
  else if (sensorRValue < ThresholdR) {  // 右センサーが黒を検知
    // 左車輪を反時計回り
    analogWrite(MotorLF, 0);        
    analogWrite(MotorLB, 255);      
    analogWrite(MotorRF, 0);        
    analogWrite(MotorRB, 0);        
  } 
  else if (sensorCValue < ThresholdC) {  // 中央センサーが黒を検知
    // 両方の車輪を反時計回り
    analogWrite(MotorLF, 0);        
    analogWrite(MotorLB, 255);      
    analogWrite(MotorRF, 0);        
    analogWrite(MotorRB, 255);      
  } 
  else if (sensorLValue < ThresholdL) {  // 左センサーが黒を検知
    // 右車輪を反時計回り
    analogWrite(MotorLF, 0);        
    analogWrite(MotorLB, 0);        
    analogWrite(MotorRF, 0);        
    analogWrite(MotorRB, 255);      
  } 
  else {
    // どのセンサーも黒を検知しない場合、全てのモーターを停止
    analogWrite(MotorLF, 0);
    analogWrite(MotorLB, 0);
    analogWrite(MotorRF, 0);
    analogWrite(MotorRB, 0);
  }

  // 処理を安定させるための小さな遅延
  delay(50);
}
